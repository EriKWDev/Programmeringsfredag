<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Test</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="css/main.css" rel="stylesheet">
        <script src="node_modules/markdown-it/dist/markdown-it.min.js"></script>
        <script src="node_modules/markdown-it-container/dist/markdown-it-container.min.js"></script>
        <script src="node_modules/markdown-it-footnote/dist/markdown-it-footnote.min.js"></script>
        <script src="node_modules/markdown-it-abbr/dist/markdown-it-abbr.js"></script>
    </head>
    <body>
        <div class="flex-container">
            <div id="content">

            </div>
        </div>
        <script>
            const getFile = async (fileName) => {
                let response = await fetch(fileName)
                let text = await response.text()
                return text
            }

            getFile("article.md").then(async (text) => {
                let md = window.markdownit({
                    html: true,
                    linkify: true,
                    typographer: true
                }).use(window.markdownitContainer, "good example", {
                    validate: (params) => { 
                        return params.match("good")
                    }
                }).use(window.markdownitContainer, "bad example", {
                    validate: (params) => { 
                        return params.match("bad")
                    }
                }).use(window.markdownitFootnote).use(window.markdownitAbbr)
                
                let abbreviations = await getFile("abbreviations.md")
                document.getElementById("content").innerHTML = await md.render(`${abbreviations} \n\n ${text}`)
            })
        </script>
    </body>
</html>