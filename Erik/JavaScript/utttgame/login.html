<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/main.css">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Login</title>
</head>
<body>
    <div class="login-container">
        <h1>Login</h1>
        <div id="error-box"></div>
        <input id="username-input" type="text" placeholder="Username"><br>
        <input id="room-input" type="text" placeholder="Room ID"><br>
        <button id="login-button" onclick="checkForm()">Go!</button>
        <p>Leave Room ID empty for overview of available games</p>
    </div>

    <script>

        let errorBox = document.getElementById("error-box")

        const formError = (message) => {
            errorBox.innerHTML += `<p>${message}</p>`
        }
    
        const checkForm = () => {
            let userNameInput = document.getElementById("username-input")
            let roomInput = document.getElementById("room-input")
            let error = false

            errorBox.innerHTML = ``

            if(userNameInput.value.length < 4) {
                formError(`Username is too short (${userNameInput.value.length} < 4)`)
                error = true
            }

            if(error == false) {
                login(userNameInput.value, roomInput.value)
            }
        }

        const login = (username, roomId) => {
            if(roomId.length == 0) {
                window.location.replace(`/${username}/`);
            } else {
                window.location.replace(`/${username}/${roomId}/`);
            }
        }

    </script>
</body>
</html>